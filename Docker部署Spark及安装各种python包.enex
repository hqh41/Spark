<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE en-export SYSTEM "http://xml.evernote.com/pub/evernote-export3.dtd">
<en-export export-date="20190730T115939Z" application="Evernote" version="Evernote Mac 6.13.1 (455786)">
<note><title>Docker部署Spark及安装各种python包</title><content><![CDATA[<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd"><en-note><div><span style="font-family: 'Courier New'; font-size: 14px;">一.使用Docker快速安装部署Spark</span></div><div><span style="font-family: 'Courier New'; font-size: 14px;">1.创建映射</span></div><div><span style="font-family: 'Courier New'; font-size: 14px;">docker run --name spark-master -v /Users/houqinghua/spark_data:/spark_data -h spark-master -e ENABLE_INIT_DAEMON=false -d bde2020/spark-master:2.3.0-hadoop2.7</span></div><div><br /></div><div><span style="font-family: 'Courier New'; font-size: 14px;">2.运行Spark</span></div><div><span style="font-family: 'Courier New'; font-size: 14px;">docker exec -it spark-master bash</span></div><div><br /></div><div><span style="font-family: 'Courier New'; font-size: 14px;">3.进入Spark目录</span></div><div><span style="font-family: 'Courier New'; font-size: 14px;">cd /spark</span></div><div><span style="font-family: 'Courier New'; font-size: 14px;">./bin/pyspark</span></div><div><br /></div><div><span style="font-family: 'Courier New'; font-size: 14px;">4.运行示例程序</span></div><div><span style="font-family: 'Courier New'; font-size: 14px;">./bin/spark-submit examples/src/main/python/pi.py 10</span></div><div><br /></div><div><span style="font-family: 'Courier New'; font-size: 14px;">5.在本地映射目录中创建文件(1.txt)，并在Spark中运行</span></div><div><span style="font-family: 'Courier New'; font-size: 14px;">&gt;&gt;&gt; textFile = spark.read.text("/spark_data/1.txt")</span></div><div><span style="font-family: 'Courier New'; font-size: 14px;">&gt;&gt;&gt; textFile.count()</span></div><div><span style="font-family: 'Courier New'; font-size: 14px;">4</span></div><div><br /></div><div><span style="font-family: 'Courier New'; font-size: 14px;">退出spark</span></div><div><span style="font-family: 'Courier New'; font-size: 14px;">Ctrl+D</span></div><div><br /></div><div><span style="font-family: 'Courier New'; font-size: 14px;">删除容器</span></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Courier New'; font-size: 14px;">docker rm spark-master</span></div><div><span style="font-style: normal; font-variant-caps: normal; font-weight: normal; line-height: normal; font-family: 'Courier New'; font-size: 14px;"><br /></span></div><div><font face="Courier New">重启spark:</font></div><div><span style="font-family: Courier New;">docker start spark-master</span></div><div><br /></div><div><span style="font-family: 'Courier New'; font-size: 14px;">二.安装numpy</span></div><div><span style="font-family: 'Courier New'; font-size: 14px;">apt-get update</span></div><div><br /></div><div><span style="font-family: 'Courier New'; font-size: 14px;">apt-get install vim</span></div><div><br /></div><div><span style="font-family: 'Courier New'; font-size: 14px;">apt-get install python-pip</span></div><div><br /></div><div><span style="letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-variant-caps: normal; font-variant-ligatures: normal; font-family: 'Courier New'; font-size: 14px;">原因是安装工具包时需要抓取网页因而要处理 https，而处理 https 又依赖加解密算法（即 cryptography 包），而 cryptography 又依赖傅立叶变换的算法以及相应的编译环境。</span></span></div><div><span style="font-family: 'Courier New'; font-size: 14px;">apt-get install libssl-dev libffi-dev python-dev build-essential libxml2-dev libxslt1-dev</span></div><div><br /></div><div><span style="font-family: 'Courier New'; font-size: 14px;">pip install numpy</span></div><div><br /></div><div><br /></div></en-note>]]></content><created>20190720T081540Z</created><updated>20190726T235149Z</updated><note-attributes><latitude>34.21908542737251</latitude><longitude>108.8891748790599</longitude><altitude>409.5993957519531</altitude><author>hqh41@outlook.com</author><source>desktop.mac</source><reminder-order>0</reminder-order></note-attributes></note>
</en-export>
